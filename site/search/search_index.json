{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Introduction","text":"<p>sark65 api is a fairly vanilla OAS JSON API. It allows you to programmatically do (almost) anything you can do manually at the SARK V6 browser. Perhaps you have an idea for an extension to SARK, maybe you want to rewrite all or parts of the SARK browser and incorporate it into a package of your own. Perhaps you wish to integrate a click-to-call feature into your web page. Maybe you want to control a remote SARK from a management layer. All of these things are possible with the API. sark6api requires a SARK V65 instance running php 8.2 or later.  Only 64 bit architectures are supported for both X86 and ARM. The API uses the Laravel 11 framework while the support code is written in a mix of standalone PHP, bash and C code.</p>"},{"location":"api/","title":"Overview","text":"<p>sark65api uses the methods GET,POST,PUT,DELETE</p> <ul> <li>GET is used for retrieval but there are some exceptions, in particular where it is used to issue commands of some description</li> <li>POST is used to create NEW instances </li> <li>PUT is used for idempotent operations, usually updates to instance variables but also to enliven a backup or a snapshot. </li> <li>DELETE is used to remove/destroy an instance</li> </ul> <p>N.B.</p> <ul> <li>ALL responses will be returned as JSON arrays and strings</li> <li>ALL regular POST/PUT bodies must ONLY contain raw JSON</li> <li>File upload (backups, greetings and snapshots) will use a regular POST Form and body</li> </ul>"},{"location":"api/#request-notation","title":"Request notation","text":"<p>An HTTPS API Request will take the form:-</p> <pre><code>METHOD /{resource}/{endpoint?}/{parameter?}\n</code></pre> <p>Where a variable ends with a question mark (?) it means the variable is optional.   e.g.</p> <pre><code>GET /agents/{agent?}\n</code></pre> <p>Thus you can request either:-</p> <pre><code>GET /agents\n</code></pre> <p>or:-</p> <pre><code>GET /agents/1021\n</code></pre> <p>The first example above will return ALL agent endpoints, the second will return agent endpoint 1021. In the document a POST/PUT BODY will be described using regular Laravel validation array elements.   e.g.  <pre><code> 'pkey' =&gt; 'required|integer|min:1000|max:9999';\n 'cluster' =&gt; 'required|exists:cluster';\n 'name' =&gt; 'required|alpha_dash';\n 'passwd' =&gt; 'required|integer|min:1000|max:9999';\n</code></pre></p> <p>Most Laravel validators are self explanatory but you can find full information in the Laravel Documentation here:-  https://laravel.com/docs/11.x/validation#available-validation-rules.</p> <ul> <li>In the POST BODY, only the REQUIRED variables are listed.   i.e the minimum you need to supply to get the instance created. </li> <li>In the PUT BODY, all of the update-able variables are listed.</li> </ul> <p>You can freely supply non-required variables during a POST if you wish but you MUST provide ALL of the REQUIRED variables or the Method will fail.</p> <p>HTTP Status Codes</p> <p>sark65api will return a standard HTTP status code with each response.  For more information see here:-  https://www.restapitutorial.com/httpstatuscodes.html</p> <p>Additionally, when required, sark65api will return error messages in JSON format</p> <p>_________________________________________________________________________________________________</p>"},{"location":"api/#api-authorization","title":"API Authorization","text":"<p>Before you can use the API you must authorize yourself.   SARK65 uses laravel Sanctum to manage and enforce access to the API. Sanctum works in a somewhat similar way to Git in that you use a UID/password to negotiate a token which you then use to access the system.</p> <p>In brief, an administrator may issue you with a UID/PWD in order to validate yourself with the API.  When you authorize yourself with correct credentials then you will be returned a \"Bearer Token\" which you must supply in the Auth header for all subsequent calls to the API. </p> <p>Alternatively, an administrator may issue you with a Bearer Token.  In these cases there is no requirement to login.   Instead you simply use the Bearer Token when you issue a request to the API.</p> <p>As an unauthorised user the ONLY API endpoint you can access is login.   Unless, or until, you succesfully authorize yourself then you will have no other access.  It therefore follows that ALL other requests must be accompanied by a Beare Token in the Auth Header.</p>"},{"location":"api/#api-auth-requests","title":"API Auth requests","text":""},{"location":"api/#login","title":"Login","text":""},{"location":"api/#post-authlogin","title":"POST /auth/login","text":"<p>Returns 200 OK and a Bearer Token on success</p> <p>Body <pre><code>'email' =&gt; 'email',\n'password' =&gt; 'alpha_dash'\n</code></pre></p>"},{"location":"api/#logout","title":"Logout","text":""},{"location":"api/#get-authlogout","title":"GET /auth/logout","text":"<p>Returns 200 OK on success The existing Bearer Token is destroyed</p>"},{"location":"api/#register","title":"Register","text":""},{"location":"api/#post-authregister","title":"POST /auth/register","text":"<p>Returns 200 OK and a Bearer Token on success An authorised user who is also an admin may create a new user with a register request.  The returned details may be passed to the end-user either as a UID/PWD pair or as a bearer token.</p>"},{"location":"api/#users","title":"Users","text":"<p>Perform various operations upon the Users relation as follows:-</p>"},{"location":"api/#get-authusers","title":"GET /auth/users","text":"<p>Returns an index of the users table.</p>"},{"location":"api/#get-authusersid","title":"GET /auth/users/{id}","text":"<p>Returns the user for a given id.</p>"},{"location":"api/#get-authusersmailemail","title":"GET /auth/users/mail/{email}","text":"<p>Returns the user for a given email address.</p>"},{"location":"api/#get-authusersnamename","title":"GET /auth/users/name/{name}","text":"<p>Returns the user for a given name.</p>"},{"location":"api/#get-authusersendpointendpoint","title":"GET /auth/users/endpoint/{endpoint}","text":"<p>Returns the user for a given SIP endpoint.</p>"},{"location":"api/#delete-authusersrevokeid","title":"DELETE /auth/users/revoke/{id}","text":"<p>Revokes the token for a given id.</p>"},{"location":"api/#delete-authusersid","title":"DELETE /auth/users/{id}","text":"<p>Delete (destroy) a given id.</p>"},{"location":"api/#whoami","title":"Whoami","text":""},{"location":"api/#get-authwhoami","title":"GET /auth/whoami","text":"<p>Returns 200 OK and the user details for the user making the request </p>"},{"location":"api/#general-api-requests","title":"General API Requests","text":""},{"location":"api/#agents","title":"Agents","text":""},{"location":"api/#get-agentsagent","title":"GET /agents/{agent?}","text":""},{"location":"api/#post-agents","title":"POST /agents","text":"<p>Body <pre><code>'pkey' =&gt; 'required|integer|min:1000|max:9999';\n'cluster' =&gt; 'required|exists:cluster';\n'name' =&gt; 'required|alpha_dash';\n'passwd' =&gt; 'required|integer|min:1000|max:9999';\n</code></pre></p>"},{"location":"api/#put-agentsagent","title":"PUT /agents/{agent}","text":"<p>Body <pre><code>'cluster' =&gt; 'exists:cluster,pkey',\n'name' =&gt; 'alpha_dash',\n'passwd' =&gt; 'integer',\n'queue1' =&gt; 'exists:queue|nullable',\n'queue2' =&gt; 'exists:queue|nullable',\n'queue3' =&gt; 'exists:queue|nullable',\n'queue4' =&gt; 'exists:queue|nullable',\n'queue5' =&gt; 'exists:queue|nullable',\n'queue6' =&gt; 'exists:queue|nullable'\n</code></pre></p>"},{"location":"api/#delete-agentsagent","title":"DELETE /agents/{agent}","text":""},{"location":"api/#backups","title":"Backups","text":""},{"location":"api/#get-backups","title":"GET /backups","text":"<p>return a list of available backups on the server</p>"},{"location":"api/#get-backupsbackup","title":"GET /backups/{backup}","text":"<p>Download an existing backup from the server</p>"},{"location":"api/#get-backupsnew","title":"GET /backups/new","text":"<p>Request a new backup be taken and saved in the backup set</p>"},{"location":"api/#post-backups","title":"POST /backups","text":"<p>Upload a local zipped backup to the backup set on the server Body <pre><code>'uploadzip' =&gt; 'required|file|mimetypesapplication/zip'\n</code></pre></p>"},{"location":"api/#put-backupsbackup","title":"PUT /backups/{backup}","text":"<p>Restore an existing backup from the backup set to the live system.  Choose which elements of the backup set you want to restore by setting the corresponding element to true (N.B. this is JSON true - i.e. no quotes) Body <pre><code>'restoredb' =&gt; 'boolean',\n'restoreasterisk' =&gt; 'boolean',\n'restoreusergreeting' =&gt; 'boolean',\n'restorevmail' =&gt; 'boolean',\n'restoreldap' =&gt; 'boolean'\n</code></pre></p>"},{"location":"api/#delete-backupsbackup","title":"DELETE /backups/{backup}","text":""},{"location":"api/#class-of-service","title":"Class of Service","text":"<p>There are three elements to CoS:-</p> <ul> <li>A rule (cosrule) which defines a particular dialplan set to be tested</li> <li>A closed instance of an egress rule (cosclose) which applies to a particular endpoint(extension)</li> <li>An open instance of an egress rule (cosopen) which applies to a particular endpoint(extension)</li> </ul> <p>Class of service instances are accessed using the extension number as the key (NOT the Class of Service key)</p>"},{"location":"api/#coscloses","title":"coscloses","text":""},{"location":"api/#get-coscloses","title":"GET /coscloses","text":"<p>returns a list of the cosrule/extension intersections from the database</p>"},{"location":"api/#get-cosclosescosclose","title":"GET /coscloses/{cosclose}","text":""},{"location":"api/#post-cosclosescosclose","title":"POST /coscloses/{cosclose}","text":"<p>create a new cosclose instance Body 'IPphone_pkey' =&gt; 'exists:ipphone,pkey', 'COS_pkey' =&gt; 'exists:cos,pkey'</p>"},{"location":"api/#deletecosclosescosclose","title":"DELETE/coscloses/{cosclose}","text":""},{"location":"api/#cosopens","title":"cosopens","text":""},{"location":"api/#get-cosopens","title":"GET /cosopens","text":"<p>returns a list of the cosrule/extension intersections from the database</p>"},{"location":"api/#get-cosopenscosopen","title":"GET /cosopens/{cosopen}","text":""},{"location":"api/#post-cosopenescosopen","title":"POST /cosopenes/{cosopen}","text":"<p>create a new cosopen instance Body 'IPphone_pkey' =&gt; 'exists:ipphone,pkey', 'COS_pkey' =&gt; 'exists:cos,pkey'</p>"},{"location":"api/#deletecosopenscosopen","title":"DELETE/cosopens/{cosopen}","text":""},{"location":"api/#cosrules","title":"cosrules","text":""},{"location":"api/#get-cosrules","title":"GET /cosrules","text":"<p>returns a list of the cosrules from the database</p>"},{"location":"api/#get-cosrulescosrule","title":"GET /cosrules/{cosrule}","text":""},{"location":"api/#post-cosrulescosrule","title":"POST /cosrules/{cosrule}","text":"<p>create a new cosrule instance Body 'pkey' =&gt; 'required|alpha_dashy', 'dialplan' =&gt; 'required'</p>"},{"location":"api/#deletecosrulescosrule","title":"DELETE/cosrules/{cosrule}","text":""},{"location":"api/#custom-apps","title":"Custom Apps","text":""},{"location":"api/#get-customappscustomapp","title":"GET /customapps/{customapp?}","text":"<p>Return a list or instance of a custom app</p>"},{"location":"api/#post-customapps","title":"POST /customapps","text":"<p>Create a new custom app Body <pre><code>key' =&gt; 'required'\nluster' =&gt; 'required'\nesc' =&gt; 'string|nullable',\nxtcode' =&gt; 'string|nullable',\nspan' =&gt; 'in:Internal,External,Both,Neither',\n'striptags' =&gt; 'in:YES,NO'\n</code></pre></p>"},{"location":"api/#put-customappscustomapp","title":"PUT /customapps/{customapp}","text":"<p>update a custom app Body <pre><code>'cluster' =&gt; 'exists:cluster,pkey',\n'desc' =&gt; 'string|nullable',\n'extcode' =&gt; 'string|nullable',\n'span' =&gt; 'in:Internal,External,Both,Neither',\n'striptags' =&gt; 'in:YES,NO'\n</code></pre></p>"},{"location":"api/#delete-customappscustomapp","title":"DELETE  /customapps/{customapp}","text":""},{"location":"api/#recurring-timers-daytimers","title":"Recurring Timers (Daytimers)","text":""},{"location":"api/#get-daytimerdaytimer","title":"GET /daytimer/{daytimer?}","text":""},{"location":"api/#post-daytimers","title":"POST /daytimers","text":"<p>Create a new daytimer Body <pre><code>'cluster' =&gt; 'required|exists:cluster,pkey',\n'datemonth' =&gt; 'in:*,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31',\n'dayofweek' =&gt; 'in:*,mon,tue,wed,thu,fri,sat,sun',\n 'desc' =&gt; 'string',\n'month' =&gt; 'in:*,jan,feb,mar,apr,may,jun,jul,aug,sep,oct,nov,dec',\n'timespan' =&gt; [\n'regex:/^\\*|(2[0-3]|[01][0-9]):([0-5][0-9])\\-(2[0-3]|[01][0-9]):([0-5][0-9])$/'\n]\n</code></pre></p>"},{"location":"api/#put-daytimersdaytimer","title":"PUT /daytimers/{daytimer}","text":"<p>update a timer Body <pre><code>'cluster' =&gt; 'required|exists:cluster,pkey',\n'datemonth' =&gt; 'in:*,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31',\n'dayofweek' =&gt; 'in:*,mon,tue,wed,thu,fri,sat,sun',\n'desc' =&gt; 'string',\n'month' =&gt; 'in:*,jan,feb,mar,apr,may,jun,jul,aug,sep,oct,nov,dec',\n'timespan' =&gt; [\n'regex:/^\\*|(2[0-3]|[01][0-9]):([0-5][0-9])\\-(2[0-3]|[01][0-9]):([0-5][0-9])$/'\n]\n</code></pre></p>"},{"location":"api/#delete-daytimersdaytimer","title":"DELETE  /daytimers/{daytimer}","text":""},{"location":"api/#destinations","title":"Destinations","text":"<p>Destinations provides a list of all currently valid destinations within the database.  It has only one method.</p>"},{"location":"api/#get-destinations","title":"GET /destinations","text":""},{"location":"api/#extensions","title":"Extensions","text":"<p>Extensions have some extra functions to deal with multiple extension types and runtime information</p>"},{"location":"api/#get-extensionsextension","title":"GET /extensions/{extension?}","text":"<p>Return a list or instance of an extension</p>"},{"location":"api/#get-extensionsextensionruntime","title":"GET /extensions/{extension}/runtime","text":"<p>Returns runtime information about  the extension from the PBX (i.e. CFIM, CFBS, ringdelay)</p>"},{"location":"api/#post-extensionsmailbox","title":"POST /extensions/mailbox","text":"<p>Create a new mailbox instance Body <pre><code>'pkey' =&gt; 'required',\n'cluster' =&gt; 'required|exists:cluster,pkey'\n</code></pre></p>"},{"location":"api/#post-extensionsprovisioned","title":"POST /extensions/provisioned","text":"<p>Create a new sark65api provisioned instance Body <pre><code>'pkey' =&gt; 'required',\n'cluster' =&gt; 'required|exists:cluster,pkey'\n'macaddr' =&gt; 'required|regex:/^[0-9a-fA-F]{12}$/'\n</code></pre></p>"},{"location":"api/#post-extensionsunprovisioned","title":"POST /extensions/unprovisioned","text":"<p>Create a new uprovisioned instance Body <pre><code>'pkey' =&gt; 'required',\n'cluster' =&gt; 'required|exists:cluster,pkey'\n</code></pre></p>"},{"location":"api/#post-extensionswebrtc","title":"POST /extensions/webrtc","text":"<p>Create a new webrtc instance Body <pre><code>'pkey' =&gt; 'required',\n'cluster' =&gt; 'required|exists:cluster,pkey'\n</code></pre></p>"},{"location":"api/#put-extensionsextension","title":"PUT /extensions/{extension}","text":"<p>Update an instance Body <pre><code>'active' =&gt; 'in:YES,NO',\n'callbackto' =&gt; 'in:desk,cell',\n'callerid' =&gt; 'integer|nullable',\n'cellphone' =&gt; 'integer|nullable',\n'celltwin' =&gt; 'in:ON,OFF',\n'cluster' =&gt; 'exists:cluster,pkey',\n'devicerec' =&gt; 'in:None,OTR,OTRR,Inbound.Outbound,Both',\n'dvrvmail' =&gt; 'exists:ipphone,pkey|nullable',\n'location' =&gt; 'in:local,remote',\n'protocol' =&gt; 'in:IPV4,IPV6',\n'provision' =&gt; 'string|nullable',\n'provisionwith' =&gt; 'in:IP,FQDN',\n'sndcreds' =&gt; 'in:No,Once,Always',\n'transport' =&gt; 'in:udp,tcp,tls,wss',\n'vmailfwd' =&gt; 'email|nullable'\n</code></pre></p>"},{"location":"api/#put-extensionsextensionruntime","title":"PUT /extensions/{extension}/runtime","text":"<p>Update runtime information for an instance Body <pre><code>'cfim' =&gt; :\n    ['regex:/^\\+?\\d+$/'],\n    ['nullable'],\n'cfbs' =&gt; \n    ['regex:/^\\+?\\d+$/'],\n    ['nullable'],            \n'ringdelay' =&gt; 'integer|nullable'\n</code></pre></p>"},{"location":"api/#delete-extensionsextension","title":"DELETE /extensions/{extension}","text":""},{"location":"api/#firewalls","title":"Firewalls","text":"<p>sark65api uses the Shorewall firewall to protect its resources.   The API operates on the entire ruleset as a simple array.   GET will return the rules, POST will update the rules and validate them (using shorewall itself) and PUT will restart the firewall.</p>"},{"location":"api/#get-firewallsipv4","title":"GET /firewalls/ipv4","text":"<p>return the IPV4 firewall rules</p>"},{"location":"api/#post-firewallsipv4","title":"POST /firewalls/ipv4","text":"<p>Upload a rules array to the server and validate it. Body <pre><code>'rules' =&gt; 'required'\n</code></pre></p>"},{"location":"api/#put-firewallsipv4","title":"PUT /firewalls/ipv4","text":"<p>Restart the IPV4 firewall</p>"},{"location":"api/#get-firewallsipv6","title":"GET /firewalls/ipv6","text":"<p>return the IPV6 firewall rules</p>"},{"location":"api/#post-firewallsipv6","title":"POST /firewalls/ipv6","text":"<p>Upload a rules array to the server and validate it. Body <pre><code>'rules' =&gt; 'required'\n</code></pre></p>"},{"location":"api/#put-firewallsipv6","title":"PUT /firewalls/ipv6","text":"<p>Restart the IPV6 firewall</p>"},{"location":"api/#greetings","title":"Greetings","text":""},{"location":"api/#get-greetings","title":"GET /greetings","text":"<p>Returns a list of greetings</p>"},{"location":"api/#get-greetingsgreeting","title":"GET /greetings/{greeting}","text":"<p>Download a greeting</p>"},{"location":"api/#post-greetings","title":"POST  /greetings","text":"<p>Upload a new greeting Body <pre><code>'greeting' =&gt; 'required|file|mimes:wav,mpeg'\n</code></pre></p>"},{"location":"api/#delete-greetingsgreeting","title":"DELETE /greetings/{greeting}","text":"<p>Delete a greeting</p>"},{"location":"api/#non-recurring-timers-holidaytimers","title":"Non Recurring Timers (Holidaytimers)","text":""},{"location":"api/#get-holidaytimersholidaytimer","title":"GET /holidaytimers{holidaytimer?}","text":"<p>Return a list or instance of HolidayTimer.   Times are stored as epoch seconds.</p>"},{"location":"api/#post-holidaytimers","title":"POST /holidaytimers","text":"<p>Create a new Holidaytimer Body <pre><code>'cluster' =&gt; 'exists:cluster,pkey',\n'route' =&gt; 'string',\n'desc' =&gt; 'string',\n'stime' =&gt; 'digits:10|nullable',\n'etime' =&gt; 'digits:10|nullable'\n</code></pre></p>"},{"location":"api/#put-holidaytimersholidaytimer","title":"PUT /holidaytimers/{holidaytimer}","text":"<p>update a timer Body <pre><code>'cluster' =&gt; 'exists:cluster,pkey',\n'route' =&gt; 'string',\n'desc' =&gt; 'string',\n'stime' =&gt; 'digits:10|nullable',\n'etime' =&gt; 'digits:10|nullable'\n</code></pre></p>"},{"location":"api/#delete-holidaytimersholidaytimer","title":"DELETE  /holidaytimers/{holidaytimer}","text":""},{"location":"api/#inbound-routes","title":"Inbound Routes","text":"<p>Inbound routes (DDI's or DiD's) control the initial ingress into the PBX core</p>"},{"location":"api/#get-inboundroutesinboundroute","title":"GET /inboundroutes/{inboundroute?}","text":"<p>Return a list or instance of InboundRoute</p>"},{"location":"api/#post-inboundroutes","title":"POST /inboundroutes","text":"<p>Create a new inboundroute Body <pre><code>'pkey' =&gt; 'required'\n'carrier' =&gt; 'required|in:DiD,CLID'\n'cluster' =&gt; 'required|exists:cluster'\n'trunkname' =&gt; 'required'\n</code></pre></p>"},{"location":"api/#put-inboundroutesinboundroute","title":"PUT /inboundroutes/{inboundroute}","text":"<p>update an inboundroute Body <pre><code>'active' =&gt; 'in:YES,NO', \n'alertinfo' =&gt; 'string',\n'carrier' =&gt; 'in:DiD,CLID',\n'closeroute' =&gt; 'string',\n'cluster' =&gt; 'exists:cluster,pkey',\n'description' =&gt; 'alpha_num',\n'disa' =&gt; 'in:DISA,CALLBACK|nullable',\n'disapass' =&gt; 'alpha_num|nullable',\n'inprefix' =&gt; 'integer|nullable',\n'moh' =&gt; 'in:ON,OFF',\n'openroute' =&gt; 'string',\n'swoclip' =&gt; 'in:YES,NO',\n'tag' =&gt; 'alpha_num|nullable',\n</code></pre></p>"},{"location":"api/#delete-inboundroutesinboundroute","title":"DELETE  /inboundroutes/{inboundroute}","text":""},{"location":"api/#ivrs","title":"IVRs","text":"<p>IVRs optionally control ACD into the PBX core</p>"},{"location":"api/#get-ivrsivr","title":"GET /ivrs/{ivr?}","text":"<p>Return a list or instance of Ivr</p>"},{"location":"api/#post-ivrs","title":"POST /ivrs","text":"<p>Create a new ivr Body <pre><code>'pkey' =&gt; 'required'\n'cluster' =&gt; 'required|exists:cluster'\n</code></pre></p>"},{"location":"api/#put-ivrsivr","title":"PUT /ivrs/{ivr}","text":"<p>update an ivr Body <pre><code>'alert0' =&gt; 'string|nullable',\n'alert1' =&gt; 'string|nullable',\n'alert2' =&gt; 'string|nullable',\n'alert3' =&gt; 'string|nullable',\n'alert4' =&gt; 'string|nullable',\n'alert5' =&gt; 'string|nullable',\n'alert6' =&gt; 'string|nullable',\n'alert7' =&gt; 'string|nullable',\n'alert8' =&gt; 'string|nullable',\n'alert9' =&gt; 'string|nullable',\n'alert10' =&gt; 'string|nullable',\n'alert11' =&gt; 'string|nullable',            \n'description' =&gt; 'string|nullable',\n'cluster' =&gt; 'exists:cluster,pkey',\n'greetnum' =&gt; 'integer',\n'listenforext' =&gt; 'in:YES,NO',\n'option0' =&gt; 'string|nullable',\n'option1' =&gt; 'string|nullable',\n'option2' =&gt; 'string|nullable',\n'option3' =&gt; 'string|nullable',\n'option4' =&gt; 'string|nullable',\n'option5' =&gt; 'string|nullable',\n'option6' =&gt; 'string|nullable',\n'option7' =&gt; 'string|nullable',\n'option8' =&gt; 'string|nullable',\n'option9' =&gt; 'string|nullable',\n'option10' =&gt; 'string|nullable',\n'option11' =&gt; 'string|nullable',\n'tag0' =&gt; 'string|nullable',\n'tag1' =&gt; 'string|nullable',\n'tag2' =&gt; 'string|nullable',\n'tag3' =&gt; 'string|nullable',\n'tag4' =&gt; 'string|nullable',\n'tag5' =&gt; 'string|nullable',\n'tag6' =&gt; 'string|nullable',\n'tag7' =&gt; 'string|nullable',\n'tag8' =&gt; 'string|nullable',\n'tag9' =&gt; 'string|nullable',\n'tag10' =&gt; 'string|nullable',\n'tag11' =&gt; 'string|nullable',            \n'timeout' =&gt; 'operator',\n</code></pre></p>"},{"location":"api/#delete-ivrsivr","title":"DELETE  /ivrs/{ivr}","text":""},{"location":"api/#logscdrs","title":"Logs/CDRs","text":"<p>Here is a placeholder for general logs.   In the initial out it only has a method to retrieve CDR.</p>"},{"location":"api/#get-logscdrslimit","title":"GET /logs/cdrs/{limit?}","text":"<p>Download the CDR log.   If {limit} is specified, download the last {limit} rows</p>"},{"location":"api/#queues","title":"Queues","text":"<p>Queues optionally control ACD into the PBX core</p>"},{"location":"api/#get-queuesqueue","title":"GET /queues{queue?}","text":"<p>Return a list or instance of Queue</p>"},{"location":"api/#post-queues","title":"POST /queues","text":"<p>Create a new queue Body <pre><code>'pkey' =&gt; 'required'\n'cluster' =&gt; 'required|exists:cluster'\n</code></pre></p>"},{"location":"api/#put-queuesqueue","title":"PUT /queues/{queue}","text":"<p>update a queue Body <pre><code>'conf' =&gt; 'string',\n'cluster' =&gt; 'exists:cluster,pkey',\n'devicerec' =&gt; 'in:None,OTR,OTRR,Inbound',\n'greetnum' =&gt; 'regex:/^usergreeting\\d{4}$',\n'options' =&gt; 'alpha',\n</code></pre></p>"},{"location":"api/#delete-queuesqueue","title":"DELETE  /queues/{queue}","text":""},{"location":"api/#snapshots","title":"Snapshots","text":"<p>A snapshot is an instance of the sark65api db. </p>"},{"location":"api/#get-snapshots","title":"GET /snapshots","text":"<p>return a list of available snapshots on the server</p>"},{"location":"api/#get-snapshotssnapshot","title":"GET /snapshots/{snapshot}","text":"<p>Download an existing snapshot from the server</p>"},{"location":"api/#get-snapshotsnew","title":"GET /snapshots/new","text":"<p>Request a new snapshot be taken and saved in the snapshot set</p>"},{"location":"api/#post-snapshots","title":"POST /snapshots","text":"<p>Upload a local snapshot to the snapshot set on the server Body <pre><code>'uploadsnap' =&gt; 'required|file|mimetypes:application/zip'\n</code></pre></p>"},{"location":"api/#put-snapshotssnapshot","title":"PUT /snapshots/{snapshot}","text":"<p>Restore an existing snapshot from the snapshot set to the live system.</p>"},{"location":"api/#delete-snapshotssnapshot","title":"DELETE /snapshots/{snapshot}","text":""},{"location":"api/#routes","title":"Routes","text":""},{"location":"api/#get-routesroute","title":"GET /routes/{route?}","text":"<p>return a list or instance of ringgroup</p>"},{"location":"api/#post-route","title":"POST /route","text":"<p>Create a new route Body <pre><code>'pkey' =&gt; 'required'\n'cluster' = 'required|exists:cluster,'\n'outcome' = 'required;\n</code></pre></p>"},{"location":"api/#put-routesroute","title":"PUT /routes/{route}","text":"<p>Update an existing route Body <pre><code>'active' =&gt; 'in:YES,NO',\n'auth' =&gt; 'in:YES,NO',\n'cluster' =&gt; 'exists:cluster,pkey',\n'desc' =&gt; 'alpha_dash',\n'dialplan' =&gt; 'string',\n'path1' =&gt; 'exists:lineio,pkey|nullable',\n'path2' =&gt; 'exists:lineio,pkey|nullable',\n'path3' =&gt; 'exists:lineio,pkey|nullable',\n'path4' =&gt; 'exists:lineio,pkey|nullable',\n'strategy' =&gt; 'in:hunt,balance'\n</code></pre></p>"},{"location":"api/#delete-routesroute","title":"DELETE /routes/{route}","text":""},{"location":"api/#system-commands","title":"System Commands","text":"<p>System commands use the GET method</p>"},{"location":"api/#get-syscommandscommand","title":"GET /syscommands/{command}","text":"<p>Available Commands</p> <ul> <li>commit</li> <li>reboot</li> <li>pbxrunstate</li> <li>pbxstart</li> <li>pbxstop</li> </ul>"},{"location":"api/#system-globals","title":"System Globals","text":"<p>Globals are system wide variables which control PBX default behaviours.  They cannot be created or deleted.</p>"},{"location":"api/#get-sysglobals","title":"GET /sysglobals","text":"<p>return a list of global settings</p>"},{"location":"api/#put-sysglobals","title":"PUT /sysglobals","text":"<p>update Global settings Body <pre><code>'ABSTIMEOUT' =&gt; 'integer',\n'ACL' =&gt; 'in:NO,YES',\n'AGENTSTART' =&gt; 'integer',\n'ALERT' =&gt; 'email',\n'ALLOWHASHXFER' =&gt; 'in:enabled,disabled',\n'BLINDBUSY' =&gt; 'integer|nullable',\n'BOUNCEALERT' =&gt; 'integer|nullable',\n'CALLPARKING' =&gt; 'in:NO,YES',\n'CALLRECORD1' =&gt; 'in:None,OTR,OTRR,Inbound.Outbound,Both',\n'CAMPONQONOFF' =&gt; 'in:OFF,ON',\n'CAMPONQOPT' =&gt; 'string|nullable',\n'CFWDEXTRNRULE' =&gt; 'in:enabled,disabled',\n'CFWDPROGRESS' =&gt; 'in:enabled,disabled',\n'CFWDANSWER' =&gt; 'in:enabled,disabled',\n'CLUSTER' =&gt; 'in:ON,OFF',\n'CONFTYPE' =&gt; 'in:simple,hosted',\n'COSSTART' =&gt; 'in:ON,OFF',\n'COUNTRYCODE' =&gt; 'alpha|size:2',\n'EURL' =&gt; 'regex:/^(https?:\\/\\/)?([\\da-z\\.-]+)\\.([a-z\\.]{2,6})([\\/\\w \\.-]*)*\\/?$/',\n'EMERGENCY' =&gt; 'digits:3',\n'FQDN' =&gt; 'regex:/^(?!:\\/\\/)(?=.{1,255}$)((.{1,63}\\.){1,127}(?![0-9]*$)[a-z0-9-]+\\.?)$/i',\n'FQDNINSPECT' =&gt; 'in:NO,YES',\n'FQDNPROV' =&gt; 'in:NO,YES',\n'INTRINGDELAY' =&gt; 'integer',\n'IVRKEYWAIT' =&gt; 'integer|nullable',\n'IVRDIGITWAIT' =&gt; 'integer|nullable',\n'LACL' =&gt; 'in:NO,YES',\n'LDAPBASE' =&gt; 'string|nullable',\n'LDAPOU' =&gt; 'string|nullable',\n'LDAPUSER' =&gt; 'string|nullable',\n'LDAPPASS' =&gt; 'string|nullable',\n'LEASEHDTIME' =&gt; 'integer',\n'LOCALIP' =&gt; 'ip',\n'LOGLEVEL' =&gt; 'integer',        \n'LOGSIPDISPSIZE' =&gt; 'integer',\n'LOGSIPNUMFILES' =&gt; 'integer',\n'LOGSIPFILESIZE' =&gt; 'integer',\n'LTERM' =&gt; 'in:NO,YES',\n'MAXIN' =&gt; 'integer',\n'MIXMONITOR' =&gt; 'in:NO,YES',\n'MONITOROUT' =&gt; 'string',\n'MONITORSTAGE' =&gt; 'string',\n'MONITORTYPE' =&gt; 'in:monitor,mixmonitor',\n'NATDEFAULT' =&gt; 'in:local,remote',\n'OPERATOR' =&gt; 'integer',\n'PWDLEN' =&gt; 'integer',    \n'PLAYBEEP' =&gt; 'in:YES.NO',\n'PLAYBUSY' =&gt; 'in:YES,NO',\n'PLAYCONGESTED' =&gt; 'in:YES,NO',\n'PLAYTRANSFER' =&gt; 'in:YES,NO',\n'RECFINALDEST' =&gt; 'string',\n'RECLIMIT' =&gt; 'integer',\n'RECQDITHER' =&gt; 'integer',\n'RECQSEARCHLIM' =&gt; 'integer',       \n'RINGDELAY' =&gt; 'integer',\n'SESSIONTIMOUT' =&gt; 'integer',\n'SENDEDOMAIN' =&gt; 'in:YES,NO',\n'SIPIAXSTART' =&gt; 'integer',\n'SIPFLOOD' =&gt; 'in:NO,YES',\n'SPYPASS' =&gt; 'integer',\n'SUPEMAIL' =&gt; 'email|nullable',\n'SYSOP' =&gt; 'integer',\n'SYSPASS' =&gt; 'integer',    \n'TLSPORT' =&gt; 'integer',\n'USEROTP' =&gt; 'string',\n'USERCREATE' =&gt; 'in:NO,YES',\n'VDELAY' =&gt; 'integer',\n'VMAILAGE' =&gt; 'integer',\n'VOICEINSTR' =&gt; 'in:YES,NO',\n'VOIPMAX' =&gt; 'integer',\n'VXT' =&gt; 'in:0,1',\n'ZTP' =&gt; 'in:disabled,enabled'\n</code></pre></p>"},{"location":"api/#templates","title":"Templates","text":"<p>Templates are used to create provisioning streams</p>"},{"location":"api/#get-templatestemplate","title":"GET /templates/{template?}","text":"<p>Return a list or instance of Template</p>"},{"location":"api/#post-templates","title":"POST /templates","text":"<p>Create a new template Body <pre><code>'pkey' =&gt; 'required'\n'technology' =&gt; 'required|in:SIP,Descriptor,BLF Template';\n</code></pre></p>"},{"location":"api/#put-templatesstemplate","title":"PUT /templatess/{template}","text":"<p>update a template Body <pre><code>'blfkeyname' =&gt; 'exists:device,pkey|nullable',\n'desc' =&gt; 'string',\n'provision' =&gt; 'string|nullable',\n'technology' =&gt; 'in:SIP,Descriptor,BLF Template';\n</code></pre></p>"},{"location":"api/#delete-templatesstemplate","title":"DELETE //templatess/{template}","text":"<p>Delete a template.  Only user created templates can be deleted.  System templates can not.</p>"},{"location":"api/#tenants","title":"Tenants","text":"<p>Tenants are used to define classes of  PBX resources.  Usually, but not always, they are customers.  For historical reasons, Tenants are internally referred to as clusters.</p>"},{"location":"api/#get-tenantstenants","title":"GET /tenants/{tenants?}","text":"<p>Return a list or instance of Tenant</p>"},{"location":"api/#post-tenants","title":"POST /tenants","text":"<p>Create a new tenant Body <pre><code>'pkey' =&gt; 'string|required'\n'description' =&gt; 'string|required'\n</code></pre></p>"},{"location":"api/#put-tenantstenant","title":"PUT /tenants/{tenant}","text":"<p>update a tenant Body <pre><code>            'abstimeout' =&gt; 'integer',\n            'allow_hash_xfer' =&gt; 'in:enabled,disabled',\n            'callrecord1' =&gt; 'in:None,In,Out,Both',\n            'cfwdextern_rule' =&gt; 'In:YES,NO',\n            'cfwd_progress' =&gt; 'in:enabled,disabled',\n            'cfwd_answer' =&gt; 'in:enabled,disabled',\n            'clusterclid' =&gt; 'integer|nullable',\n            'chanmax' =&gt; 'integer',\n            'countrycode' =&gt; 'integer',\n            'dynamicfeatures' =&gt; 'string',\n            'description' =&gt; 'string',\n            'emergency' =&gt; 'integer',\n            'int_ring_delay' =&gt; 'integer',\n            'ivr_key_wait' =&gt; 'integer',\n            'ivr_digit_wait' =&gt; 'integer',\n            'language' =&gt; 'string',\n            'ldapanonbind' =&gt; 'YES',\n            'ldapbase' =&gt; 'string',\n            'ldaphost' =&gt; 'string',\n            'ldapou' =&gt; 'string',\n            'ldapuser' =&gt; 'string',\n            'ldappass' =&gt; 'sarkstring',\n            'ldaptls' =&gt; 'in:on,off',\n            'localarea' =&gt; 'numeric|nullable',\n            'localdplan' =&gt; [\n                    'regex:/^_X+$/',\n                    'nullable'\n            ],\n            'lterm' =&gt; 'boolean',\n            'leasedhdtime' =&gt; 'integer|nullable',\n            'masteroclo' =&gt; 'in:AUTO,CLOSED',\n            'max_in' =&gt; 'integer',\n            'monitor_out' =&gt; 'string',\n            'operator' =&gt; 'integer',\n            'pickupgroup' =&gt; 'string',\n            'play_beep' =&gt; 'boolean',\n            'play_busy' =&gt; 'boolean',\n            'play_congested' =&gt; 'boolean',\n            'play_transfer' =&gt; 'boolean',\n            'rec_age' =&gt; 'integer',\n            'rec_final_dest' =&gt; 'string',\n            'rec_file_dlim' =&gt; 'string',\n            'rec_grace' =&gt; 'integer',\n            'rec_limit' =&gt; 'integer',\n            'rec_mount' =&gt; 'integer',\n            'recmaxage' =&gt; 'integer',\n            'recmaxsize' =&gt; 'integer',\n            'recused' =&gt; 'integer',\n            'ringdelay' =&gt; 'integer',\n            'routeoverride' =&gt; 'integer',\n            'spy_pass' =&gt; 'integer',\n            'sysop' =&gt; 'integer',\n            'syspass' =&gt; 'integer',\n            'usemohcustom' =&gt; 'integer|nullable',\n            'vmail_age' =&gt; 'integer',\n            'voice_instr' =&gt; 'boolean',\n            'voip_max' =&gt; 'integer'\n</code></pre></p>"},{"location":"api/#delete-tenantstenant","title":"DELETE /tenants/{tenant}","text":"<p>Deleting a tenant will delete ALL of its dependencies.</p>"},{"location":"api/#trunks","title":"Trunks","text":"<p>Trunks are used to define peers.   Mostly you can think of them as axes of egress from the PBX (Ingress is usually defined by DDI/DiD abstractions)</p>"},{"location":"api/#get-trunkstrunk","title":"GET /trunks/{trunk?}","text":"<p>Return a list or instance of Trunks</p>"},{"location":"api/#post-trunks","title":"POST /trunks","text":"<p>Create a new trunk Body <pre><code>'pkey' =&gt; 'required'\n'carrier' =&gt; 'required|in:GeneralSIP,GeneralIAX2'\n'cluster' =&gt; 'required|exists:cluster,' . $request-&gt;cluster\n'username' =&gt; 'required'\n'host' =&gt; 'required'\n</code></pre></p>"},{"location":"api/#put-trunkstrunk","title":"PUT /trunks/{trunk}","text":"<p>update a trunk Body <pre><code>'active' =&gt; 'in:YES,NO', \n'alertinfo' =&gt; 'string',\n'callerid' =&gt; 'integer',\n'callprogress' =&gt; 'in:ON,OFF',\n'cluster' =&gt; 'exists:cluster,pkey',\n'description' =&gt; 'alpha_num',\n'devicerec' =&gt; 'in:None,OTR,OTRR,Inbound.Outbound,Both',\n'disa' =&gt; 'in:DISA,CALLBACK|nullable',\n'disapass' =&gt; 'alpha_num|nullable',\n'host' =&gt; 'string', \n'inprefix' =&gt; 'integer|nullable',\n'match' =&gt; 'integer|nullable',\n'moh' =&gt; 'in:ON,OFF',\n'password' =&gt; 'alpha_num|nullable',\n'peername' =&gt; 'string',\n'register' =&gt; 'string|nullable',\n'sipiaxpeer' =&gt; 'string',\n'sipiaxuser' =&gt; 'string',\n'swoclip' =&gt; 'in:YES,NO',\n'tag' =&gt; 'alpha_num|nullable',\n'transform' =&gt; [\n:'regex:/$(\\d+?:\\d+?\\s*)+',\n:'nullable'\n],\n'trunkname' =&gt; 'alpha_num',\n</code></pre></p>"},{"location":"api/#delete-trunkstrunk","title":"DELETE /trunks/{trunk}","text":""},{"location":"api/#asterisk-ami-functions-exposed-by-the-api","title":"Asterisk AMI functions exposed by the API","text":"<p>sark65api gives you access to a range of functions from the Asterisk Manager Interface(AMI).  This allows you to examine, and in some cases change, state information from the running PBX.  N.B. sark65api implements blocking AMI requests.  if you want to access non-blocking AMI streams then you can look at something like PAMI.</p> <ul> <li>Most of the AMI functions use GET.   They return either an instance list or a single instance.  </li> <li>The AMI ''''Originate'''' bridging function uses POST </li> <li>Asterisk internal database ''''DBPut'''' uses PUT</li> <li>Asterisk internal database ''''DBDel'''' uses DELETE</li> <li>AMI function names are case sensitive for consistency with the Asterisk AMI documentation (of which, there is very little).  </li> <li>We have not documented the returned variables so you will need to run the requests using something like Postman and decide what you want by examination.</li> </ul>"},{"location":"api/#list-ami-functions","title":"List AMI Functions","text":"<p>Each of these functions will return a JSON array</p>"},{"location":"api/#get-astamis","title":"GET /astamis/","text":"<ul> <li>Agents</li> <li>ConfbridgeList/{''room-number''} </li> <li>ConfbridgeListRooms       </li> <li>CoreShowChannels</li> <li>DeviceStateList</li> <li>ExtensionStateList</li> <li>IAXpeers</li> <li>IAXregistry</li> <li>QueueStatus  </li> <li>QueueSummary                </li> <li>SIPpeers </li> <li>SIPshowregistry</li> <li>Status</li> <li>VoicemailUsersList</li> </ul>"},{"location":"api/#instance-ami-functions","title":"Instance AMI Functions","text":"<p>GET /astamis/ </p> <ul> <li>CoreSettings</li> <li>CoreStatus</li> <li>ExtensionState/{''id''}{''context?''}</li> <li>MailboxCount/{''id''}</li> <li>MailboxStatus/{''id''}</li> <li>QueueStatus/{''id''}</li> <li>QueueSummary/{''id}''</li> <li>Reload</li> <li>SIPshowpeer/{''id''}</li> </ul>"},{"location":"api/#post-astamisoriginate","title":"POST /astamis/originate","text":"<p>originate a new bridge</p> <p>Body</p> <pre><code>target = 'required|integer';\ncaller = 'required|numeric';\ncontext = 'required|alpha_dash'\nclid = 'required|numeric';\n</code></pre>"},{"location":"api/#asterisk-internal-db-astdb-functions","title":"Asterisk internal DB (AstDB) functions","text":""},{"location":"api/#get-astamisdbpgetidkey","title":"GET /astamis/DBPGet/{id}/{key}","text":""},{"location":"api/#put-astamisdbputidkeyvalue","title":"PUT /astamis/DBPut/{id}/{key}(value)","text":""},{"location":"api/#delete-astamisdbdelidkey","title":"DELETE /astamis/DBdel/{id}/{key}","text":""},{"location":"api/#asterisk-soft-hangup","title":"Asterisk soft Hangup","text":""},{"location":"api/#delete-astamishangupidkey","title":"DELETE /astamis/Hangup/{id}/{key}","text":"<p>Hangup perfoms a \"soft\" hangup on a running channel.  The actual channel can be either side of the call bridge, it doesn't matter which you choose in a regular two-party call.  As an example, let's say we wish to hangup a channel called PJSIP/44107-00000155.   Here's what you would send:-</p> <pre><code>https://sip.mypbx.com:44300/api/astamis/Hangup/PJSIP/44107-00000155\n</code></pre>"}]}